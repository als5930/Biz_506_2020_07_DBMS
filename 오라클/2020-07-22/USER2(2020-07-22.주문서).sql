-- ì—¬ê¸°ëŠ” user2 í™”ë©´ìž…ë‹ˆë‹¤


<<<<<<< HEAD
-- ÁÖ¹®¹øÈ£, °í°´¹øÈ£,  »óÇ°ÄÚµå
=======
-- ì£¼ë¬¸ë²ˆí˜¸, ê³ ê°ë²ˆí˜¸,  ìƒí’ˆì½”ë“œ
>>>>>>> 39a9a01bc8ab5aa0f6bddf03b46bb8ed9e85d620
-- O00001    C0032      P00001   
-- O00001    C0032      P00002
-- O00001    C0032      P00003


<<<<<<< HEAD
--DROP TABLE tbl_order;

SELECT * FROM tbl_ÁÖ¹®¼­¿øÀå;

----------------------------------
-- ÁÖ¹®¼­ ¿øÀå
=======
SELECT * FROM tbl_ì£¼ë¬¸ì„œì›ìž¥;

----------------------------------
-- ì£¼ë¬¸ì„œ ì›ìž¥
>>>>>>> 39a9a01bc8ab5aa0f6bddf03b46bb8ed9e85d620
----------------------------------
CREATE TABLE tbl_order(
        O_SEQ	NUMBER	PRIMARY KEY,
        O_NUM	CHAR(6)	NOT NULL,	
        O_DATE	CHAR(10)	NOT NULL,	
        O_CNUM	CHAR(5)	NOT NULL,	
        O_PCODE	CHAR(6)	NOT NULL,	
        O_PNAME	nVARCHAR2(125),		
        O_PRICE	NUMBER,		
        O_QTY	NUMBER,		
        O_TOTAL	NUMBER		
);

<<<<<<< HEAD
-- tbl_order TableÀ» ¸¸µé¸é¼­ ¿©±â¿¡ Ãß°¡µÉ µ¥ÀÌÅÍµé Áß¿¡ 1°³ÀÇ Ä®·³À¸·Î´Â PK¸¦ ¸¸µé¼ö ¾ø¾î¼­
-- ÀÓÀÇÀÇ ÀÏ·Ã¹øÈ£ Ä®·³À» ÇÏ³ª Ãß°¡ÇÏ°í ÀÌ Ä®·³À» PK ¼±¾ðÇß´Ù.
-- ÀÌ»óÈ²ÀÌ µÇ¸é µ¥ÀÌÅÍ¸¦ Ãß°¡ÇÒ¶§ ÀÏÀÏÈ÷ O_SEQ Ä®·³¿¡ ÀúÀåµÈ µ¥ÀÌÅÍµéÀ» »ìÆìº¸°í
-- µî·ÏµÇÁö ¾Ê´Â ¼ýÀÚ¸¦ ¸¸µç´ÙÀ½ ±× °ªÀ¸·Î SEQÀ» Á¤ÇÏ°í INSERT¸¦ ¼öÇàÇØ¾ß ÇÑ´Ù.
-- ÀÌ·±¹æ½ÄÀº ÄÚµå¸¦ ¸Å¿ì ºÒÆíÇÏ°Ô ¸¸µå´Â °á°ú¸¦ ³º°ÔµÈ´Ù.

-- ÀÌ·¯ÇÑ ºÒÆíÀ» ¹æÁöÇÏ±â À§ÇØ SEQUENCE ¶ó´Â °´Ã¼¸¦ »ç¿ëÇÏ¿©, ÀÚµ¿À¸·Î ÀÏ·Ã¹øÈ£¸¦ ¸¸µå´Â ¹æ¹ýÀ» »ç¿ëÇÑ´Ù.
=======
-- tbl_order Tableì„ ë§Œë“¤ë©´ì„œ ì—¬ê¸°ì— ì¶”ê°€ë  ë°ì´í„°ë“¤ ì¤‘ì— 1ê°œì˜ ì¹¼ëŸ¼ìœ¼ë¡œëŠ” PKë¥¼ ë§Œë“¤ìˆ˜ ì—†ì–´ì„œ
-- ìž„ì˜ì˜ ì¼ë ¨ë²ˆí˜¸ ì¹¼ëŸ¼ì„ í•˜ë‚˜ ì¶”ê°€í•˜ê³  ì´ ì¹¼ëŸ¼ì„ PK ì„ ì–¸í–ˆë‹¤.
-- ì´ìƒí™©ì´ ë˜ë©´ ë°ì´í„°ë¥¼ ì¶”ê°€í• ë•Œ ì¼ì¼ížˆ O_SEQ ì¹¼ëŸ¼ì— ì €ìž¥ëœ ë°ì´í„°ë“¤ì„ ì‚´íŽ´ë³´ê³ 
-- ë“±ë¡ë˜ì§€ ì•ŠëŠ” ìˆ«ìžë¥¼ ë§Œë“ ë‹¤ìŒ ê·¸ ê°’ìœ¼ë¡œ SEQì„ ì •í•˜ê³  INSERTë¥¼ ìˆ˜í–‰í•´ì•¼ í•œë‹¤.
-- ì´ëŸ°ë°©ì‹ì€ ì½”ë“œë¥¼ ë§¤ìš° ë¶ˆíŽ¸í•˜ê²Œ ë§Œë“œëŠ” ê²°ê³¼ë¥¼ ë‚³ê²Œëœë‹¤.

-- ì´ëŸ¬í•œ ë¶ˆíŽ¸ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ SEQUENCE ë¼ëŠ” ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬, ìžë™ìœ¼ë¡œ ì¼ë ¨ë²ˆí˜¸ë¥¼ ë§Œë“œëŠ” ë°©ë²•ì„ ì‚¬ìš©í•œë‹¤.
>>>>>>> 39a9a01bc8ab5aa0f6bddf03b46bb8ed9e85d620

CREATE SEQUENCE seq_order
START WITH 1 INCREMENT BY 1;

<<<<<<< HEAD
-- Ç¥ÁØ SQL¿¡¼­ °£´ÜÇÑ °è»êÀ» ÇÒ¶§
-- SELECT 3 + 4; ¶ó°í ÄÚµùÀ» ÇÏ¸é 3+4ÀÇ °á°ú¸¦ È®ÀÎ ÇÒ ¼ö ÀÖ´Ù.
-- ±×·±µ¥ ¿À¶óÅ¬¿¡¼­´Â SELECT ¸í·É¹®¿¡  FROM [table] ÀýÀÌ ¾øÀ¸¸é ¹®¹ý¿À·ù°¡ ³­´Ù.
-- ÀÌ·¯ÇÑ ÄÚµå°¡ ÇÊ¿äÇÒ¶§ ½Ã½ºÅÛ¿¡ ÀÌ¹Ì ÁØºñµÇ¾î ÀÖ´Â DUALÀÌ¶ó´Â DUMMY Å×ÀÌºíÀ» »ç¿ëÇØ¼­ ÄÚµùÀ» ÇÑ´Ù.
SELECT 3 + 4 FROM DUAL;

-- seq_order °´Ã¼ÀÇ NEXTVAL ÀÌ¶ó´Â ¸ðµâ(ÇÔ¼ö¿ªÇÒ)À» È£ÃâÇÏ¿©
-- º¯È­µÇ´Â ÀÏ·Ã¹øÈ£¸¦ º¸¿©´Þ¶ó ¶ó´Â ÄÚµå
SELECT seq_order.NEXTVAL FROM DUAL;

-- ÀÌ seq_orderÀÇ NEXTVAL ¸ðµâÀ» »ç¿ëÇÏ¿© INSERT¸¦ ¼öÇàÇÒ¶§ ÀÏ·Ã¹øÈ£¸¦ ÀÚµ¿À¸·Î ºÎ¿©ÇÒ ¼ö ÀÖ´Ù.
=======
-- í‘œì¤€ SQLì—ì„œ ê°„ë‹¨í•œ ê³„ì‚°ì„ í• ë•Œ
-- SELECT 3 + 4; ë¼ê³  ì½”ë”©ì„ í•˜ë©´ 3+4ì˜ ê²°ê³¼ë¥¼ í™•ì¸ í•  ìˆ˜ ìžˆë‹¤.
-- ê·¸ëŸ°ë° ì˜¤ë¼í´ì—ì„œëŠ” SELECT ëª…ë ¹ë¬¸ì—  FROM [table] ì ˆì´ ì—†ìœ¼ë©´ ë¬¸ë²•ì˜¤ë¥˜ê°€ ë‚œë‹¤.
-- ì´ëŸ¬í•œ ì½”ë“œê°€ í•„ìš”í• ë•Œ ì‹œìŠ¤í…œì— ì´ë¯¸ ì¤€ë¹„ë˜ì–´ ìžˆëŠ” DUALì´ë¼ëŠ” DUMMY í…Œì´ë¸”ì„ ì‚¬ìš©í•´ì„œ ì½”ë”©ì„ í•œë‹¤.
SELECT 3 + 4 FROM DUAL;

-- seq_order ê°ì²´ì˜ NEXTVAL ì´ë¼ëŠ” ëª¨ë“ˆ(í•¨ìˆ˜ì—­í• )ì„ í˜¸ì¶œí•˜ì—¬
-- ë³€í™”ë˜ëŠ” ì¼ë ¨ë²ˆí˜¸ë¥¼ ë³´ì—¬ë‹¬ë¼ ë¼ëŠ” ì½”ë“œ
SELECT seq_order.NEXTVAL FROM DUAL;

-- ì´ seq_orderì˜ NEXTVAL ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ INSERTë¥¼ ìˆ˜í–‰í• ë•Œ ì¼ë ¨ë²ˆí˜¸ë¥¼ ìžë™ìœ¼ë¡œ ë¶€ì—¬í•  ìˆ˜ ìžˆë‹¤.
>>>>>>> 39a9a01bc8ab5aa0f6bddf03b46bb8ed9e85d620

INSERT INTO tbl_order(o_seq, o_date,o_num, o_cnum, o_pcode) 
        VALUES (seq_order.NEXTVAL,'2020-07-22','O00001','C0032','P00001') ;
INSERT INTO tbl_order(o_seq, o_date,o_num, o_cnum, o_pcode) 
        VALUES (seq_order.NEXTVAL,'2020-07-22','O00001','C0032','P00002') ;
INSERT INTO tbl_order(o_seq, o_date,o_num, o_cnum, o_pcode) 
        VALUES (seq_order.NEXTVAL,'2020-07-22','O00001','C0032','P00003') ;
<<<<<<< HEAD
-- ÁÖ¹®¹øÈ£, °í°´¹øÈ£,  »óÇ°ÄÚµå
=======
-- ì£¼ë¬¸ë²ˆí˜¸, ê³ ê°ë²ˆí˜¸,  ìƒí’ˆì½”ë“œ
>>>>>>> 39a9a01bc8ab5aa0f6bddf03b46bb8ed9e85d620
-- O00001    C0032      P00001   
-- O00001    C0032      P00002
-- O00001    C0032      P00003
SELECT o_num, o_cnum, o_pcode FROM tbl_order;

<<<<<<< HEAD
-- Áö±Ý tbl_order Å×ÀÌºí¿¡ À§¿Í °°Àº µ¥ÀÌÅÍ°¡ ÀÖÀ»¶§
-- O00001    C0031      P00001 ÀÌ·¯ÇÑ µ¥ÀÌÅÍ¸¦ Ãß°¡ÇÑ´Ù¸é ¾Æ¹«·± Á¦¾à¾øÀÌ °ªÀÌ Ãß°¡µÇ ¹ö¸± °ÍÀÌ´Ù.
=======
-- ì§€ê¸ˆ tbl_order í…Œì´ë¸”ì— ìœ„ì™€ ê°™ì€ ë°ì´í„°ê°€ ìžˆì„ë•Œ
-- O00001    C0031      P00001 ì´ëŸ¬í•œ ë°ì´í„°ë¥¼ ì¶”ê°€í•œë‹¤ë©´ ì•„ë¬´ëŸ° ì œì•½ì—†ì´ ê°’ì´ ì¶”ê°€ë˜ ë²„ë¦´ ê²ƒì´ë‹¤.
>>>>>>> 39a9a01bc8ab5aa0f6bddf03b46bb8ed9e85d620
INSERT INTO tbl_order(o_seq, o_date,o_num, o_cnum, o_pcode) 
        VALUES (seq_order.NEXTVAL,'2020-07-22','O00001','C0032','P00001') ;
        
SELECT o_num, o_cnum, o_pcode FROM tbl_order;

<<<<<<< HEAD
-- ÁÖ¹®¹øÈ£, °í°´¹øÈ£, »óÇ°ÄÚµå ÀÌ 3°³ÀÇ Ä®·³ ¹¬À½ÀÇ °ªÀÌ Áßº¹µÇ¸é INSERT°¡ µÇÁö ¾Êµµ·Ï Á¦¾àÁ¶°ÇÀ» ¼³Á¤ÇØ¾ß ÇÑ´Ù.
-- UNIQUE : Ä®·³¿¡ °ªÀÌ Áßº¹µÇ¾î¼­ INSERT °¡ µÇ´Â °ÍÀ» ¹æÁöÇÏ´Â Á¦¾àÁ¶°Ç
-- ÁÖ¹®Å×ÀÌºí¿¡ UNIQUE Á¦¾àÁ¶°ÇÀ» Ãß°¡ÇÏÀÚ
=======
-- ì£¼ë¬¸ë²ˆí˜¸, ê³ ê°ë²ˆí˜¸, ìƒí’ˆì½”ë“œ ì´ 3ê°œì˜ ì¹¼ëŸ¼ ë¬µìŒì˜ ê°’ì´ ì¤‘ë³µë˜ë©´ INSERTê°€ ë˜ì§€ ì•Šë„ë¡ ì œì•½ì¡°ê±´ì„ ì„¤ì •í•´ì•¼ í•œë‹¤.
-- UNIQUE : ì¹¼ëŸ¼ì— ê°’ì´ ì¤‘ë³µë˜ì–´ì„œ INSERT ê°€ ë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ëŠ” ì œì•½ì¡°ê±´
-- ì£¼ë¬¸í…Œì´ë¸”ì— UNIQUE ì œì•½ì¡°ê±´ì„ ì¶”ê°€í•˜ìž
>>>>>>> 39a9a01bc8ab5aa0f6bddf03b46bb8ed9e85d620
ALTER TABLE tbl_order 
    ADD CONSTRAINT UQ_ORDER 
        UNIQUE (o_num, o_cnum, o_pcode) ;

<<<<<<< HEAD
-- UNIQUE¸¦ Ãß°¡ÇÏ´Âµ¥ ÀÌ¹Ì UNIQUE Á¶°Ç¿¡ À§¹è´Â °ªÀÌ ÀÖÀ¸¸é Á¦¾àÁ¶°ÇÀÌ Ãß°¡µÇÁö ¾Ê´Â´Ù
-- duplicate keys found : PK, UNIQUE·Î ¼³Á¤µÈ Ä®·³¿¡ °ªÀ» Ãß°¡ÇÏ°Å³ª, 
--          ÀÌ¹Ì Áßº¹µÈ °ªÀÌ ÀÖ´Âµ¥ PK, UNIQUE¸¦ ¼³Á¤ÇÏ·Á ÇÒ¶§ ¹ß»ýÀ» ÇÑ´Ù.

-- UNIQUE Á¦¾àÁ¶°ÇÀ» Ãß°¡ÇÏ±â À§ÇØ ¸¶Áö¸·¿¡ Ãß°¡µÈ µ¥ÀÌÅÍ¸¦ Á¦°ÅÇÏ·Á°í ´ÙÀ½°ú °°Àº SQLÀ» ½ÇÇàÇÑ´Ù
-- ÀÌ SQLÀ» ½ÇÇàÇÏ¸é, »èÁ¦µÇ¾î¼­´Â ¾ÈµÇ´Â Áß¿äÇÑ ÁÖ¹®Á¤º¸ 1°ÇÀÌ °°ÀÌ »èÁ¦ µÇ¾î ¹ö¸± °ÍÀÌ´Ù.
-- ÀÌ Table ÀÇ µ¥ÀÌÅÍ´Â ¹«°á¼ºÀ» ÀÒ°ÔµÈ´Ù => »èÁ¦ÀÌ»ó
DELETE FROM tbl_order
    WHERE o_num = 'O00001' AND o_cnum = 'C0032' AND o_pcode = 'P00001' ;
    
-- ´ÙÇàÈ÷ ÀÏ·Ã¹øÈ£ Ä®·³ÀÌ ¸¸µé¾îÁ® ÀÖ±â ¶§¹®¿¡ PK¸¦ ±âÁØÀ¸·Î °ªÀ» »èÁ¦ÇÒ¼ö ÀÖ´Ù
SELECT * FROM tbl_order;

DELETE FROM tbl_order
    WHERE O_seq = 9;
    

ALTER TABLE tbl_order 
    ADD CONSTRAINT UQ_ORDER 
        UNIQUE (o_num, o_cnum, o_pcode) ;
        
-- ÈÄº¸Å°Áß¿¡ ´ÜÀÏÄ®·³À¸·Î PK¸¦ ¼³Á¤ÇÒ ¼ö ¾ø´Â »óÈ²ÀÌ ¹ß»ýÀ» ÇÏ¸é
-- º¹¼öÀÇ Ä®·³À¸·Î PK¸¦ ¼³Á¤ÇÏ´Âµ¥
-- UPDATE, DELETE ¼öÇàÇÒ¶§   
--    WHERE Ä®·³1 = °ª AND Ä®·³2 = °ª AND Ä®·³3 = °ª .... °ú °°Àº Á¶°ÇÀ» ºÎ¿©ÇØ¾ß ÇÑ´Ù
-- ÀÌ°ÍÀº µ¥ÀÌÅÍ ¹«°á¼ºÀ» À¯ÁöÇÏ´Âµ¥ ¸Å¿ì ÁÁÁö¾ÊÀº È¯°æÀÌ´Ù
-- ÀÌ·²¶§ µ¥ÀÌÅÍ¿Í »ó°ü¾ø´Â SEQ Ä®·³À» ¸¸µé¾î PK·Î ¼³Á¤ÇÏÀÚ

SELECT * FROM tbl_order ;


INSERT INTO tbl_order(o_seq, o_date,o_num, o_cnum, o_pcode) 
        VALUES (seq_order.NEXTVAL,'2020-07-22','O00022','C0055','P00067') ;
COMMIT ;        
=======
-- UNIQUEë¥¼ ì¶”ê°€í•˜ëŠ”ë° ì´ë¯¸ UNIQUE ì¡°ê±´ì— ìœ„ë°°ëŠ” ê°’ì´ ìžˆìœ¼ë©´ ì œì•½ì¡°ê±´ì´ ì¶”ê°€ë˜ì§€ ì•ŠëŠ”ë‹¤
-- duplicate keys found : PK, UNIQUEë¡œ ì„¤ì •ëœ ì¹¼ëŸ¼ì— ê°’ì„ ì¶”ê°€í•˜ê±°ë‚˜, 
--          ì´ë¯¸ ì¤‘ë³µëœ ê°’ì´ ìžˆëŠ”ë° PK, UNIQUEë¥¼ ì„¤ì •í•˜ë ¤ í• ë•Œ ë°œìƒì„ í•œë‹¤.

-- UNIQUE ì œì•½ì¡°ê±´ì„ ì¶”ê°€í•˜ê¸° ìœ„í•´ ë§ˆì§€ë§‰ì— ì¶”ê°€ëœ ë°ì´í„°ë¥¼ ì œê±°í•˜ë ¤ê³  ë‹¤ìŒê³¼ ê°™ì€ SQLì„ ì‹¤í–‰í•œë‹¤
-- ì´ SQLì„ ì‹¤í–‰í•˜ë©´, ì‚­ì œë˜ì–´ì„œëŠ” ì•ˆë˜ëŠ” ì¤‘ìš”í•œ ì£¼ë¬¸ì •ë³´ 1ê±´ì´ ê°™ì´ ì‚­ì œ ë˜ì–´ ë²„ë¦´ ê²ƒì´ë‹¤.
-- ì´ Table ì˜ ë°ì´í„°ëŠ” ë¬´ê²°ì„±ì„ ìžƒê²Œëœë‹¤ => ì‚­ì œì´ìƒ
DELETE FROM tbl_order
    WHERE o_num = 'O00001' AND o_cnum = 'C0032' AND o_pcode = 'P00001' ;
    
-- ë‹¤í–‰ížˆ ì¼ë ¨ë²ˆí˜¸ ì¹¼ëŸ¼ì´ ë§Œë“¤ì–´ì ¸ ìžˆê¸° ë•Œë¬¸ì— PKë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê°’ì„ ì‚­ì œí• ìˆ˜ ìžˆë‹¤
SELECT * FROM tbl_order;

DELETE FROM tbl_order
    WHERE O_seq = 9;
    

ALTER TABLE tbl_order 
    ADD CONSTRAINT UQ_ORDER 
        UNIQUE (o_num, o_cnum, o_pcode) ;
        
-- í›„ë³´í‚¤ì¤‘ì— ë‹¨ì¼ì¹¼ëŸ¼ìœ¼ë¡œ PKë¥¼ ì„¤ì •í•  ìˆ˜ ì—†ëŠ” ìƒí™©ì´ ë°œìƒì„ í•˜ë©´
-- ë³µìˆ˜ì˜ ì¹¼ëŸ¼ìœ¼ë¡œ PKë¥¼ ì„¤ì •í•˜ëŠ”ë°
-- UPDATE, DELETE ìˆ˜í–‰í• ë•Œ   
--    WHERE ì¹¼ëŸ¼1 = ê°’ AND ì¹¼ëŸ¼2 = ê°’ AND ì¹¼ëŸ¼3 = ê°’ .... ê³¼ ê°™ì€ ì¡°ê±´ì„ ë¶€ì—¬í•´ì•¼ í•œë‹¤
-- ì´ê²ƒì€ ë°ì´í„° ë¬´ê²°ì„±ì„ ìœ ì§€í•˜ëŠ”ë° ë§¤ìš° ì¢‹ì§€ì•Šì€ í™˜ê²½ì´ë‹¤
-- ì´ëŸ´ë•Œ ë°ì´í„°ì™€ ìƒê´€ì—†ëŠ” SEQ ì¹¼ëŸ¼ì„ ë§Œë“¤ì–´ PKë¡œ ì„¤ì •í•˜ìž

SELECT * FROM tbl_order ;


INSERT INTO tbl_order(o_seq, o_date,o_num, o_cnum, o_pcode) 
        VALUES (seq_order.NEXTVAL,'2020-07-22','O00022','C0055','P00067') ;
COMMIT ;        

>>>>>>> 39a9a01bc8ab5aa0f6bddf03b46bb8ed9e85d620
